	<!DOCTYPE html>
	<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>英语朗读器</title>
<style>
  body { font-family: sans-serif; padding: 20px; background: #f5f5f5; }
  textarea { width: 100%; height: 150px; font-size: 16px; padding: 10px; }
  button { margin-top: 10px; padding: 10px 20px; font-size: 16px; }
  #output p { cursor: pointer; padding: 5px; margin: 3px 0; border-radius: 4px; }
  #output p.highlight { background: #ffd966; }
  label { display: block; margin-top: 10px; }
</style>
</head>
<body>

<h2>英语朗读器（点击句子朗读）</h2>

<textarea id="input" placeholder="在这里粘贴英文文章"></textarea>
<br>
<label>语速: <input type="range" id="speed" min="0.5" max="2" value="1" step="0.1"></label>
<button onclick="process()">处理文章</button>

<div id="output"></div>

<script>
let currentHighlight = null;

function process() {
  // 停止任何正在朗读
  speechSynthesis.cancel();
  
  let text = document.getElementById("input").value;
  if (!text) return alert("请先输入英文文章！");
  
  // 分句（按 . ! ? 分割）
  let sentences = text.match(/[^.!?]+[.!?]?/g).map(s => s.trim()).filter(s => s.length > 0);
  let output = document.getElementById("output");
  output.innerHTML = "";

  sentences.forEach((sentence, index) => {
    let p = document.createElement("p");
    p.textContent = sentence;
    p.onclick = function() {
      if (currentHighlight) currentHighlight.classList.remove("highlight");
      p.classList.add("highlight");
      currentHighlight = p;
      
      let utterance = new SpeechSynthesisUtterance(sentence);
      utterance.lang = "en-US";
      utterance.rate = parseFloat(document.getElementById("speed").value);
      utterance.onend = () => { p.classList.remove("highlight"); };
      speechSynthesis.speak(utterance);
    };
    output.appendChild(p);
  });
}
</script>

</body>
</html>